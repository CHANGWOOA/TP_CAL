<script>
    const isChecked=(box)=>{
        console.log(box);

        const title=document.getElementById('title');
        const btn=document.getElementById('label_btn');
        if (! box.checked){
            btn.innerHTML=`
<style>
    #label_btnc {
        margin-left:15px;
    }
    div[name='title'] {
        font-style:normal;
        color: black;
}
</style>`

        }else{
            btn.innerHTML=`
<style>
    #label_btnc {
        margin-left:0;
    }
    div[name='title'] {
        font-style: italic;
        color: rgb(100, 100, 100);
}
</style>`

        }
        console.log(box.checked);
    }
</script>


<div id="inside_wrap">
    <div id="todo">
        <div id="todo_title">To-Do</div>
        <form action="/todo/newtodo" method="post" id="todoform">
            <textarea name="T_TITLE" id="title" maxlength="13" placeholder="제목" required></textarea>
            <select name="T_PRIORITY" id="priority" required>
                <option value="priority" selected disabled hidden >우선순위</option>
                <option value="0">없음</option>
                <option value="disable" disabled>-</option>
                <option value="1">낮음</option>
                <option value="2">중간</option>
                <option value="3">높음</option>
            </select>
            <input type="hidden" name="U_ID" value="U_ID">
            <input type="hidden" name="T_CHECK" value="T_CHECK">
            <input type="submit" value="등록">
        </form>
            
            <% for (i=0;i<todo.rows.length;i++) { %>
                <div id="todolist" >
                    <div id="todo_wrap">
                        <div id="context"> 
                        <label for="todo_checkbox" >
                            <div id="lebel_bg">
                                <div id="label_btn"></div>
                            </div>
                        </label>
                        <% if(todo.rows[i]['T_PRIORITY']=='1') { %>
                            !
                        <% } else if(todo.rows[i]['T_PRIORITY']=='2'){ %>
                            !! 
                        <% } else if(todo.rows[i]['T_PRIORITY']=='3') { %>
                            !!!
                            <%  } else { %>
                            <% } %>
                        <div name="title" id="todo_title-<%= todo.rows[i].T_ID %>"><%= todo.rows[i]['T_TITLE'] %></div>
                        <input type="checkbox" name="<%= todo.rows[i]['T_ID'] %>" id="todo_checkbox" onclick="isChecked(this)">
                    </div></div>
                    
                    <div class="icon">
                        <button type="submit" style="border:none; background:none; padding:0;">
                        <svg width="13px" height="13px" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M8.29289 3.70711L1 11V15H5L12.2929 7.70711L8.29289 3.70711Z" fill="rgb(100, 100, 100)"/>
                            <path d="M8.29289 3.70711L1 11V15H5L12.2929 7.70711L8.29289 3.70711Z" fill="rgb(100, 100, 100)"/>
                            <path d="M9.70711 2.29289L13.7071 6.29289L15.1716 4.82843C15.702 4.29799 16 3.57857 16 2.82843C16 1.26633 14.7337 0 13.1716 0C12.4214 0 11.702 0.297995 11.1716 0.828428L9.70711 2.29289Z" fill="rgb(100, 100, 100)"/>
                            </svg>
                            </button>

                            <form action="/todo/delete" method="post" style="display:inline;">
                                <input type="hidden" name="T_TITLE" value="<%= todo.rows[i]['T_TITLE'] %>">
                                <button type="submit" style="border:none; background:none; padding:0;">
                            <svg id="delete" width="13px" height="13px" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M4 2H1V4H15V2H12V0H4V2Z" fill="rgb(100, 100, 100)"/>
                                <path fill-rule="evenodd" clip-rule="evenodd" d="M3 6H13V16H3V6ZM7 9H9V13H7V9Z" fill="rgb(100, 100, 100)"/>
                                </svg>
                                </button>
                                </form>
                    </div>
                    

            </div>

            <% } %>
        </div>
        </div>


