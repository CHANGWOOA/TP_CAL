<script>
    const isChecked=(box,todo)=>{
        console.log('todo',todo);

        const title=document.getElementById('title');
        const list=document.getElementById('todo_warp');
        const btn=document.getElementById('label_btn');


        if (! box.checked){
            btn.innerHTML=`
<style>
    #label_btn {
        margin-left:0;

    }
    div[name='title'] {
        font-style:normal;
        color: black;
}
    #list: {
    }
</style>`

        }else{
            btn.innerHTML=`
<style>
    #label_btn {
        margin-left:15px;
    }
    div[name='title'] {
        font-style: italic;
        color: rgb(100, 100, 100);
}
</style>`

        }
        
    }

</script>


<div id="inside_wrap">
    <div id="todo">
        <div id="todo_title">To-Do</div>
        <form action="/todo/newtodo" method="post" id="todoform">
            <textarea name="title" id="title" maxlength="20" placeholder="제목" required></textarea>
            <select name="priority" id="priority" requireds>
                <option value="priority" selected disabled hidden >우선순위</option>
                <option value="0">없음</option>
                <option value="disable" disabled>-</option>
                <option value="1">낮음</option>
                <option value="2">중간</option>
                <option value="3">높음</option>
            </select>
            <input type="hidden" name="id" value="user">
            <input type="hidden" name="pk" value="aaa">
            <input type="submit" value="등록">
        </form>
            <% for (i=0;i<todo.length;i++) { %>


                <div id="todolist" >
                    <div id="todo_wrap">
                        <div id="context"> 
                        <label for="todo_checkbox" >
                            <div id="lebel_bg">
                                <div id="label_btn"></div>
                            </div>
                        </label>
                        <% console.log(i,'todo',todo[i]) %>

                            <input type="checkbox" id="todo_checkbox" onclick="isChecked(this,'<%= todo %>')">
                        <div>
                        <% if(todo[i]['priority']=='1') { %>
                            <svg width="20px" height="20px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M12 5L12 15" stroke="gray" stroke-width="3" stroke-linecap="round"/>
                                <path d="M12 19.0112V19" stroke="gray" stroke-width="3" stroke-linecap="round"/>
                                </svg>
                        <% } else if(todo[i]['priority']=='2') { %>
                            <svg width="20px" height="20px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M12 5L12 15" stroke="green" stroke-width="3" stroke-linecap="round"/>
                                <path d="M12 19.0112V19" stroke="green" stroke-width="3" stroke-linecap="round"/>
                                </svg>
                        <% } else if(todo[i]['priority']=='3') { %>
                            <svg width="20px" height="20px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M12 5L12 15" stroke="red" stroke-width="3" stroke-linecap="round"/>
                                <path d="M12 19.0112V19" stroke="red" stroke-width="3" stroke-linecap="round"/>
                                </svg>
                        <% } %>
                        </div>
                        <div name="title" id=`todo_title`><%= todo[i]['title'] %></div>
                    
                        </div>
                        <div class="icon">
                            <a href="/todo/modify">
                            <svg width="13px" height="13px" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M8.29289 3.70711L1 11V15H5L12.2929 7.70711L8.29289 3.70711Z" fill="rgb(100, 100, 100)"/>
                                <path d="M8.29289 3.70711L1 11V15H5L12.2929 7.70711L8.29289 3.70711Z" fill="rgb(100, 100, 100)"/>
                                <path d="M9.70711 2.29289L13.7071 6.29289L15.1716 4.82843C15.702 4.29799 16 3.57857 16 2.82843C16 1.26633 14.7337 0 13.1716 0C12.4214 0 11.702 0.297995 11.1716 0.828428L9.70711 2.29289Z" fill="rgb(100, 100, 100)"/>
                                <path d="M9.70711 2.29289L13.7071 6.29289L15.1716 4.82843C15.702 4.29799 16 3.57857 16 2.82843C16 1.26633 14.7337 0 13.1716 0C12.4214 0 11.702 0.297995 11.1716 0.828428L9.70711 2.29289Z" fill="rgb(100, 100, 100)"/>
                                </svg></a>
                                <a href="/todo/delete">
                                <svg id="delete" width="13px" height="13px" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M4 2H1V4H15V2H12V0H4V2Z" fill="rgb(100, 100, 100)"/>
                                    <path fill-rule="evenodd" clip-rule="evenodd" d="M3 6H13V16H3V6ZM7 9H9V13H7V9Z" fill="rgb(100, 100, 100)"/>
                                    </svg></a>
                        </div>
                    </div>
                    

            </div>

            <% } %>
        </div>


